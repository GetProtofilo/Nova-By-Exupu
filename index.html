<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dark Arena â€” Free Fire Scrims</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#06070a;
  --panel:#0b0f16;
  --panel-2:#0d1119;
  --blue:#21c1ff;
  --red:#ff2d55;
  --accent:#7a4dff;
  --text:#e7ecf3;
  --muted:#95a2b3;
  --ok:#1fe39a;
  --warn:#ffb020;
  --danger:#ff4d6d;
  --glass:rgba(255,255,255,0.06);
  --glass-2:rgba(255,255,255,0.08);
  --shadow:0 10px 30px rgba(0,0,0,.5), 0 0 60px rgba(33,193,255,.1), inset 0 0 0 1px rgba(255,255,255,.03);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:radial-gradient(1200px 800px at 10% -10%,rgba(33,193,255,.14),transparent 50%),
           radial-gradient(1200px 800px at 110% 110%,rgba(255,45,85,.12),transparent 50%),
           var(--bg);
  color:var(--text); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  overflow-x:hidden;
}
a{color:inherit}
button,input,select{font:inherit;color:inherit}
.btn{
  background:linear-gradient(135deg,var(--blue),#1284ff 30%,#0e68ff 70%);
  color:#fff;border:none;padding:12px 18px;border-radius:12px;cursor:pointer;
  box-shadow:0 10px 20px rgba(18,132,255,.25), inset 0 0 0 1px rgba(255,255,255,.07);
  transition:transform .06s ease,filter .2s ease; user-select:none
}
.btn:hover{filter:brightness(1.06)}
.btn:active{transform:translateY(1px)}
.btn.alt{
  background:linear-gradient(135deg,var(--red),#ff1647 60%,#f00f3a 100%);
  box-shadow:0 10px 20px rgba(255,22,71,.25), inset 0 0 0 1px rgba(255,255,255,.07);
}
.btn.ghost{
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12)
}
.chip{
  display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.12); font-weight:600; color:#fff
}
.wrap{max-width:1200px;margin:0 auto;padding:24px}
.nav{
  position:sticky;top:0;z-index:50;background:linear-gradient(180deg,rgba(6,7,10,.9),rgba(6,7,10,.6));
  border-bottom:1px solid rgba(255,255,255,.06);backdrop-filter:blur(8px)
}
.brand{display:flex;align-items:center;gap:14px}
.logo{
  width:42px;height:42px;border-radius:10px;position:relative;overflow:hidden;box-shadow:var(--shadow)
}
.logo::before, .logo::after{
  content:"";position:absolute;inset:0;border-radius:inherit;mix-blend-mode:screen;
}
.logo::before{background:conic-gradient(from 210deg at 30% 30%,#21c1ff,transparent 40%, #ff2d55 60%, transparent 70%, #7a4dff)}
.logo::after{
  background:radial-gradient(80% 80% at 60% 30%, rgba(33,193,255,.65), transparent 60%),
             radial-gradient(80% 80% at 40% 70%, rgba(255,45,85,.65), transparent 60%);
  filter:blur(10px) saturate(120%);
}
.brand h1{font-family:"Russo One",Inter,sans-serif;margin:0;font-size:20px;letter-spacing:.6px}
.navbar{
  display:flex;align-items:center;justify-content:space-between;gap:16px
}
.nav-actions{display:flex;align-items:center;gap:10px}
.card{
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.10); border-radius:16px; box-shadow:var(--shadow); padding:18px
}
.grid{display:grid;gap:16px}
@media(min-width:900px){.grid.cols-3{grid-template-columns:repeat(3,1fr)} .grid.cols-4{grid-template-columns:repeat(4,1fr)} }
.kpis{display:grid;gap:12px;grid-template-columns:repeat(2,1fr)}
@media(min-width:700px){.kpis{grid-template-columns:repeat(4,1fr)}}
.kpi{padding:14px 16px;border-radius:14px;background:var(--panel);border:1px solid rgba(255,255,255,.07)}
.kpi h3{margin:0 0 6px 0;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.8px}
.kpi .v{font-size:20px;font-weight:800}
.section-title{
  display:flex;align-items:center;justify-content:space-between;margin:18px 0 8px 0
}
.huge{font-size:38px;line-height:1.05;margin:12px 0 6px;font-family:"Russo One";letter-spacing:.4px}
.sub{color:var(--muted)}
.input{
  background:var(--panel-2); border:1px solid rgba(255,255,255,.10); color:var(--text);
  padding:12px 14px;border-radius:12px;width:100%;outline:none
}
.label{font-size:12px;color:var(--muted);margin-bottom:8px}
.row{display:flex;gap:12px;flex-wrap:wrap}
.modal{
  position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:20px;
  background:rgba(0,0,0,.6);backdrop-filter:blur(3px);z-index:60
}
.modal.open{display:flex}
.modal .dialog{max-width:520px;width:100%}
.tabbar{
  display:flex;gap:6px;background:rgba(255,255,255,.06);padding:6px;border-radius:12px;border:1px solid rgba(255,255,255,.10)
}
.tabbar button{flex:1}
.tab{display:none}
.tab.active{display:block;animation:fade .25s ease}
@keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.scrim-card{
  position:relative; overflow:hidden; border-radius:16px; padding:18px; min-height:160px;
  background:
    radial-gradient(60% 80% at 80% 10%, rgba(255,45,85,.22), transparent 60%),
    radial-gradient(60% 80% at 10% 90%, rgba(33,193,255,.22), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.12); box-shadow:var(--shadow);
}
.scrim-card h3{margin:0 0 6px;font-size:18px}
.scrim-card p{margin:0;color:var(--muted);font-size:13px}
.price{position:absolute;right:12px;top:12px}
.glow{
  text-shadow:0 0 12px rgba(33,193,255,.8),0 0 20px rgba(255,45,85,.5);
}
.hr{height:1px;background:linear-gradient(90deg,transparent, rgba(255,255,255,.14), transparent);margin:16px 0}
footer{padding:40px 24px;color:var(--muted);text-align:center}
.small{font-size:12px;color:var(--muted)}
/* Hero canvas overlay for "FF-style" pulse */
.hero{
  position:relative; overflow:hidden; border-radius:20px; padding:24px; background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08)
}
.hero canvas{position:absolute; inset:0; width:100%; height:100%; filter:blur(0.3px); opacity:.8}
.hero-content{position:relative; z-index:2}
.marquee{
  overflow:hidden; white-space:nowrap; border-radius:10px; border:1px solid rgba(255,255,255,.1);
  background:rgba(255,255,255,.04); padding:8px 0; font-weight:700; letter-spacing:.5px
}
.marquee span{display:inline-block; padding-left:100%; animation:marq 18s linear infinite}
@keyframes marq{to{transform:translateX(-100%)}}
.table{width:100%;border-collapse:separate;border-spacing:0 10px}
.table th{font-size:12px;color:var(--muted);text-align:left;padding:0 10px}
.table td{background:var(--panel);border:1px solid rgba(255,255,255,.07);padding:12px 10px}
.table tr td:first-child{border-radius:10px 0 0 10px}
.table tr td:last-child{border-radius:0 10px 10px 0}
.hidden{display:none !important}
</style>
</head>
<body>
  <header class="nav">
    <div class="wrap navbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>DARK ARENA</h1>
        <span class="chip" id="statusChip">Guest</span>
      </div>
      <div class="nav-actions">
        <button class="btn ghost" data-tab="homeTab">Home</button>
        <button class="btn ghost" data-tab="scrimsTab">BR Scrims</button>
        <button class="btn ghost" data-tab="walletTab">Coins</button>
        <button class="btn ghost" data-tab="profileTab">Profile</button>
        <button class="btn alt" id="loginBtn">Register / Login</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero card">
      <canvas id="ffCanvas" aria-hidden="true"></canvas>
      <div class="hero-content">
        <div class="row" style="align-items:center;justify-content:space-between">
          <div>
            <div class="chip">Free Fire â€¢ Battle Royale</div>
            <h2 class="huge glow">Enter the Arena. Win the Night.</h2>
            <p class="sub">Register with your number, add coins via UPI/QR, join timeâ€‘based lobbies, and track your stats. Blue â€¢ Red â€¢ Black â€” bold and clean.</p>
            <div class="row">
              <button class="btn" data-tab="scrimsTab">Join BR Scrims</button>
              <button class="btn alt" data-tab="walletTab">Add Coins</button>
              <span class="chip">Wallet: <span id="walletTop">0</span> ðŸª™</span>
            </div>
          </div>
          <div class="kpis" style="max-width:520px">
            <div class="kpi"><h3>Players</h3><div class="v" id="kpiPlayers">0</div></div>
            <div class="kpi"><h3>Scrims Joined</h3><div class="v" id="kpiJoined">0</div></div>
            <div class="kpi"><h3>Coins Spent</h3><div class="v" id="kpiSpent">0</div></div>
            <div class="kpi"><h3>Next Lobbies</h3><div class="v">12pm â€¢ 3pm â€¢ 6pm â€¢ 9pm â€¢ 12am</div></div>
          </div>
        </div>
      </div>
    </section>

    <div class="marquee" style="margin:16px 0 24px">
      <span>âš¡ BR SCRIMS LIVE â€¢ 12pm â€¢ 3pm â€¢ 6pm â€¢ 9pm (90m) â€¢ 12am â€¢ No hacks, no excuses. Play clean, win loud. âš¡</span>
    </div>

    <div class="tabbar" style="margin-bottom:16px">
      <button class="btn ghost" data-tab="homeTab">Home</button>
      <button class="btn ghost" data-tab="scrimsTab">BR Scrims</button>
      <button class="btn ghost" data-tab="walletTab">Coins</button>
      <button class="btn ghost" data-tab="profileTab">Profile</button>
    </div>

    <!-- HOME -->
    <section id="homeTab" class="tab active">
      <div class="grid cols-3">
        <div class="scrim-card">
          <div class="price chip">Entry 100 ðŸª™</div>
          <h3>BR SCRIMS â€¢ Ranked</h3>
          <p>Classic battle royale. 48 teams max. Antiâ€‘cheat & observers.</p>
          <div class="hr"></div>
          <div class="row">
            <button class="btn" data-tab="scrimsTab">See Lobbies</button>
            <span class="chip">Kills Ã— Bonus</span>
          </div>
        </div>
        <div class="scrim-card">
          <div class="price chip">Entry 150 ðŸª™</div>
          <h3>ESPORTS â€¢ Elite</h3>
          <p>Higher stakes. Streamed highlights. Top 24 only.</p>
          <div class="hr"></div>
          <button class="btn" disabled>Coming Soon</button>
        </div>
        <div class="scrim-card">
          <div class="price chip">Free</div>
          <h3>Practice Rooms</h3>
          <p>Warmâ€‘ups & customs. Rotate maps. Community coaches.</p>
          <div class="hr"></div>
          <button class="btn ghost" disabled>Opens Tonight</button>
        </div>
      </div>
    </section>

    <!-- SCRIMS -->
    <section id="scrimsTab" class="tab">
      <div class="section-title">
        <h3 class="huge">BR Scrims</h3>
        <span class="chip">Wallet: <span id="walletBadge">0</span> ðŸª™</span>
      </div>
      <div class="grid cols-4" id="lobbyGrid">
        <!-- Lobbies injected by JS -->
      </div>

      <div id="joinCard" class="card hidden" style="margin-top:16px">
        <h3 style="margin:0 0 6px">Join Lobby: <span id="joinLobbyName">â€”</span></h3>
        <p class="sub">Fill team details, pay with coins, done.</p>
        <div class="row">
          <div style="flex:1;min-width:220px">
            <div class="label">Team Name</div>
            <input id="teamName" class="input" placeholder="e.g., Shadow Ninjas" maxlength="24">
          </div>
          <div style="flex:1;min-width:220px">
            <div class="label">IGL Phone</div>
            <input id="iglPhone" class="input" placeholder="10-digit number" maxlength="14">
          </div>
        </div>
        <div class="hr"></div>
        <div class="row" style="align-items:center;justify-content:space-between">
          <div class="small">Entry Fee: <b id="joinFee">â€”</b> ðŸª™ â€¢ Slots left: <b id="joinSlots">â€”</b></div>
          <div class="row">
            <button class="btn ghost" id="cancelJoin">Cancel</button>
            <button class="btn alt" id="payJoin">Pay with Coins</button>
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h3 style="margin:0 0 6px">Your Registrations</h3>
        <table class="table" id="regTable">
          <thead><tr><th>Lobby</th><th>Team</th><th>IGL</th><th>Fee</th><th>Status</th><th>Time</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- WALLET -->
    <section id="walletTab" class="tab">
      <div class="section-title">
        <h3 class="huge">Coins Wallet</h3>
        <span class="chip">Balance: <span id="wallet">0</span> ðŸª™</span>
      </div>
      <div class="grid cols-3">
        <div class="card">
          <h3>Add Coins (UPI / QR)</h3>
          <p class="sub">Simulated flow now. Hook your gateway later.</p>
          <div class="label">Amount (â‚¹)</div>
          <input id="amountINR" class="input" type="number" min="10" step="10" value="100">
          <div class="row" style="margin-top:10px">
            <button class="btn" id="showQR">Show UPI / QR</button>
            <button class="btn alt" id="mockPaid">Iâ€™ve Paid</button>
          </div>
          <div class="hr"></div>
          <div class="small">Conversion: 1 â‚¹ = 1 ðŸª™ (configurable)</div>
        </div>
        <div class="card">
          <h3>Recent Wallet Activity</h3>
          <table class="table" id="txTable">
            <thead><tr><th>Type</th><th>Amount</th><th>When</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="card">
          <h3>Safety</h3>
          <ul>
            <li>No refunds on confirmed lobby joins.</li>
            <li>Payment verification will be auto when gateway is linked.</li>
            <li>Keep your phone updated for OTP.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- PROFILE -->
    <section id="profileTab" class="tab">
      <div class="section-title">
        <h3 class="huge">Profile & Stats</h3>
        <button class="btn ghost" id="logoutBtn">Logout</button>
      </div>
      <div class="grid cols-3">
        <div class="card">
          <h3>Account</h3>
          <p class="small">Registered Phone</p>
          <div class="chip" id="profilePhone">â€”</div>
          <div class="hr"></div>
          <p class="small">Display Name</p>
          <input id="displayName" class="input" placeholder="Your inâ€‘game tag">
          <div class="row" style="margin-top:10px"><button class="btn" id="saveProfile">Save</button></div>
        </div>
        <div class="card">
          <h3>Stats</h3>
          <div class="kpis">
            <div class="kpi"><h3>Joined</h3><div class="v" id="statJoined">0</div></div>
            <div class="kpi"><h3>Coins Spent</h3><div class="v" id="statSpent">0</div></div>
            <div class="kpi"><h3>Coins Added</h3><div class="v" id="statAdded">0</div></div>
            <div class="kpi"><h3>Fav Lobby</h3><div class="v" id="statFav">â€”</div></div>
          </div>
        </div>
        <div class="card">
          <h3>Receipts (Simulated)</h3>
          <table class="table" id="receiptTable">
            <thead><tr><th>Ref</th><th>Detail</th><th>Amount</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div>Â© Dark Arena â€” Built for Free Fire scrims communities. This is a design/UX mock; integrate your real provider for payments.</div>
  </footer>

  <!-- LOGIN MODAL -->
  <div class="modal" id="loginModal" aria-hidden="true">
    <div class="dialog card">
      <h3 style="margin-top:0">Register / Login</h3>
      <div class="label">Phone Number</div>
      <input id="loginPhone" class="input" placeholder="Enter phone" maxlength="14">
      <div class="row" style="margin-top:10px">
        <button class="btn" id="sendOTP">Send OTP</button>
        <button class="btn ghost" id="closeLogin">Close</button>
      </div>
      <div id="otpArea" class="hidden">
        <div class="label">Enter OTP</div>
        <input id="otpInput" class="input" placeholder="6-digit">
        <div class="small" id="otpHint"></div>
        <div class="row" style="margin-top:10px">
          <button class="btn alt" id="verifyOTP">Verify</button>
        </div>
      </div>
    </div>
  </div>

  <!-- QR MODAL -->
  <div class="modal" id="qrModal" aria-hidden="true">
    <div class="dialog card" style="text-align:center">
      <h3 style="margin-top:0">Scan to Pay (Demo)</h3>
      <canvas id="qrCanvas" width="280" height="280" style="background:#fff;border-radius:12px"></canvas>
      <div class="small" id="qrUPI">upi://pay?pa=demo@upi&amp;pn=DarkArena&amp;am=100&amp;cu=INR</div>
      <div class="row" style="margin-top:10px;justify-content:center">
        <button class="btn ghost" id="closeQR">Close</button>
      </div>
    </div>
  </div>

<script>
/* ---------- State & Utils ---------- */
const store = {
  get k(){ return JSON.parse(localStorage.getItem('da_state')||'{}') },
  set k(v){ localStorage.setItem('da_state', JSON.stringify(v)) },
  up(part){ const s=this.k; this.k = {...s, ...part}; }
};
const now = ()=> new Date().toLocaleString();
const fmt = n => Number(n).toLocaleString();

function ensureState(){
  const s = store.k;
  if(!s.user) s.user = { phone:null, name:"", wallet:0, added:0, spent:0, joined:0 };
  if(!s.tx) s.tx = []; // wallet tx
  if(!s.receipts) s.receipts = [];
  if(!s.regs) s.regs = []; // lobby registrations
  if(!s.players) s.players = 0;
  if(!s.lobbies){
    s.lobbies = [
      { id:"12p", name:"12:00 PM Lobby", fee:100, cap:48, joined:0 },
      { id:"3p",  name:"3:00 PM Lobby",  fee:100, cap:48, joined:0 },
      { id:"6p",  name:"6:00 PM Lobby",  fee:100, cap:48, joined:0 },
      { id:"9p",  name:"9:00 PM Lobby (90m)", fee:100, cap:48, joined:0 },
      { id:"12a", name:"12:00 AM Lobby", fee:100, cap:48, joined:0 },
    ];
  }
  store.k = s;
}
ensureState();

/* ---------- Tabs ---------- */
const tabs = [...document.querySelectorAll('.tab')];
[...document.querySelectorAll('[data-tab]')].forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const id = btn.getAttribute('data-tab');
    tabs.forEach(t=>t.classList.toggle('active', t.id===id));
    if(id==='scrimsTab') renderLobbies();
    if(id==='walletTab') renderWallet();
    if(id==='profileTab') renderProfile();
    if(id==='homeTab') renderKPIs();
  });
});

/* ---------- Hero Canvas (FF-style pulse & sparks) ---------- */
(function FFCanvas(){
  const c = document.getElementById('ffCanvas');
  const ctx = c.getContext('2d');
  const DPR = Math.min(window.devicePixelRatio || 1, 2);
  function resize(){
    c.width = c.clientWidth * DPR;
    c.height = c.clientHeight * DPR;
  }
  window.addEventListener('resize', resize); resize();
  const sparks = [...Array(90)].map(()=>({
    x: Math.random()*c.width, y: Math.random()*c.height, r: Math.random()*2+0.4,
    vx:(Math.random()-0.5)*0.3, vy:(Math.random()-0.5)*0.3,
    hue: Math.random()<0.5 ? 195 : 350
  }));
  function loop(){
    ctx.clearRect(0,0,c.width,c.height);
    // background pulse
    const t = Date.now()/1000;
    const g = ctx.createRadialGradient(c.width*0.2,c.height*0.2,50, c.width*0.2,c.height*0.2,Math.max(c.width,c.height)*0.6);
    g.addColorStop(0, `hsla(195,100%,60%,${0.18+Math.sin(t*1.7)*0.06})`);
    g.addColorStop(1, 'transparent');
    ctx.fillStyle = g; ctx.fillRect(0,0,c.width,c.height);
    const r = ctx.createRadialGradient(c.width*0.8,c.height*0.8,50, c.width*0.8,c.height*0.8,Math.max(c.width,c.height)*0.6);
    r.addColorStop(0, `hsla(350,100%,60%,${0.18+Math.cos(t*1.3)*0.06})`);
    r.addColorStop(1, 'transparent');
    ctx.fillStyle = r; ctx.fillRect(0,0,c.width,c.height);
    // sparks
    sparks.forEach(s=>{
      s.x+=s.vx; s.y+=s.vy;
      if(s.x<0||s.x>c.width) s.vx*=-1;
      if(s.y<0||s.y>c.height) s.vy*=-1;
      ctx.beginPath(); ctx.arc(s.x,s.y,s.r*DPR,0,Math.PI*2);
      ctx.fillStyle = `hsla(${s.hue},100%,60%,.8
